"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[685],{6685:(P,u,e)=>{e.d(u,{u:()=>g});var r=e(4946),s=e(6814),o=e(95),l=e(2239),i=e(6879),c=e(2198),_=e(6247),n=e(1230),h=e(4063),C=e(7394);function a(p,f){if(1&p&&(r.TgZ(0,"div",11),r._UZ(1,"input",34),r.qZA()),2&p){const v=f.index;r.xp6(1),r.Q6J("formControlName",v)}}const d=["*"];let g=(()=>{var p;class f{constructor(){this.isUpdate=!1,this.isCreate=!1,this.fb=(0,r.f3M)(o.qu),this.productService=(0,r.f3M)(l.s),this.alertService=(0,r.f3M)(i.c),this.validFormService=(0,r.f3M)(h.i),this.isValid=n.J,this.unSub=new C.w0,this.allImagesFormArray=this.fb.array([this.fb.control("")]),this.productForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.minLength(4)]],descr:["",[o.kI.required,o.kI.minLength(4)]],shortDescr:["",[o.kI.required,o.kI.minLength(4)]],price:["0",[o.kI.required,o.kI.min(0)]],discount:["0",[o.kI.required,o.kI.min(0)]],brand:["",[o.kI.required,o.kI.minLength(4)]],category:["",[o.kI.required,o.kI.minLength(4)]],subcategory:["",[o.kI.required,o.kI.minLength(4)]],instock:["true",[o.kI.required]],countInStock:["0",[o.kI.required,o.kI.min(0)]],baseImage:[""],allImages:this.allImagesFormArray,material:[""],filling:[""],sizes:[""],color:[""],ergonomics:[""],load:[""],functions:[""],additional:[""],care:[""]})}get allImages(){return this.productForm.get("allImages")}ngOnInit(){this.product&&(0,c.w)(this.productForm,this.product),this.product?.allImages.length&&this.product.allImages.forEach(m=>{this.allImagesFormArray.push(this.fb.control(m))})}onSubmit(){this.isUpdate&&this.product._id&&this.unSub.add(this.productService.updateProduct(this.productForm.value,this.product._id).subscribe(()=>{this.alertService.success("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e")})),this.isCreate&&this.unSub.add(this.productService.createProduct(this.productForm.value).subscribe(()=>{this.alertService.success("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e")}))}addImageField(){this.allImagesFormArray.push(this.fb.control(""))}deleteImageField(){this.allImagesFormArray.length>1&&this.allImagesFormArray.removeAt(-1)}ngOnDestroy(){this.unSub.unsubscribe(),this.isCreate=!1,this.isUpdate=!1}}return(p=f).\u0275fac=function(m){return new(m||p)},p.\u0275cmp=r.Xpm({type:p,selectors:[["app-edit-product-item"]],inputs:{product:"product",isUpdate:"isUpdate",isCreate:"isCreate"},standalone:!0,features:[r.jDz],ngContentSelectors:d,decls:78,vars:36,consts:[[1,"wraper"],[1,"add-product__content"],[1,"form-wrap",3,"formGroup","change","ngSubmit"],[1,"input-wrap",3,"ngClass"],["type","text","placeholder","Product name","formControlName","name",1,"input"],[3,"control"],["type","text","placeholder","Product brand","formControlName","brand",1,"input"],["type","text","placeholder","Product category","formControlName","category",1,"input"],["type","text","placeholder","Product subcategory","formControlName","subcategory",1,"input"],["type","number","placeholder","Product price","formControlName","price","min","0",1,"input"],["type","number","placeholder","Product discount","formControlName","discount","min","0",1,"input"],[1,"input-wrap"],["type","text","placeholder","Product instock","formControlName","instock",1,"input"],["value","false"],["value","true","selected",""],["type","number","placeholder","Product countInStock","formControlName","countInStock","min","0",1,"input"],["type","text","placeholder","Product shortDescr","formControlName","shortDescr",1,"input"],["name","description","id","","cols","30","rows","10","placeholder","Product description","formControlName","descr"],["type","text","formControlName","baseImage",1,"input"],["formArrayName","allImages",1,"allimages"],["class","input-wrap",4,"ngFor","ngForOf"],[1,"allimages__btn"],["type","button",1,"btn","btn__add",3,"click"],[1,"form-wrap"],["type","text","placeholder","Product material","formControlName","material",1,"input"],["type","text","placeholder","Product filling","formControlName","filling",1,"input"],["type","text","placeholder","Product sizes","formControlName","sizes",1,"input"],["type","text","placeholder","Product color","formControlName","color",1,"input"],["type","text","placeholder","Product ergonomics","formControlName","ergonomics",1,"input"],["type","text","placeholder","Product load","formControlName","load",1,"input"],["type","text","placeholder","Product functions","formControlName","functions",1,"input"],["type","text","placeholder","Product additional","formControlName","additional",1,"input"],["type","text","placeholder","Product care","formControlName","care",1,"input"],[1,"action"],["type","text",1,"input",3,"formControlName"]],template:function(m,t){1&m&&(r.F$t(),r.TgZ(0,"div",0)(1,"div",1)(2,"h1"),r._uU(3,"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"),r.qZA(),r.TgZ(4,"form",2),r.NdJ("change",function(){return t.validFormService.isValid(t.productForm.valid)})("ngSubmit",function(){return t.onSubmit()}),r.TgZ(5,"div",3),r._UZ(6,"input",4)(7,"app-error-validation",5),r.qZA(),r.TgZ(8,"div",3),r._UZ(9,"input",6)(10,"app-error-validation",5),r.qZA(),r.TgZ(11,"div",3),r._UZ(12,"input",7)(13,"app-error-validation",5),r.qZA(),r.TgZ(14,"div",3),r._UZ(15,"input",8)(16,"app-error-validation",5),r.qZA(),r.TgZ(17,"div",3),r._UZ(18,"input",9)(19,"app-error-validation",5),r.qZA(),r.TgZ(20,"div",3),r._UZ(21,"input",10)(22,"app-error-validation",5),r.qZA(),r.TgZ(23,"div",11)(24,"select",12)(25,"option",13),r._uU(26,"False"),r.qZA(),r.TgZ(27,"option",14),r._uU(28,"True"),r.qZA()()(),r.TgZ(29,"div",3),r._UZ(30,"input",15)(31,"app-error-validation",5),r.qZA(),r.TgZ(32,"div",3),r._UZ(33,"input",16)(34,"app-error-validation",5),r.qZA(),r._UZ(35,"textarea",17),r.TgZ(36,"div",11),r._UZ(37,"input",18),r.qZA(),r.TgZ(38,"div",19),r.YNc(39,a,2,1,"div",20),r.qZA(),r.TgZ(40,"div",21)(41,"button",22),r.NdJ("click",function(){return t.addImageField()}),r._uU(42," + "),r.qZA(),r.TgZ(43,"button",22),r.NdJ("click",function(){return t.deleteImageField()}),r._uU(44," - "),r.qZA()(),r.TgZ(45,"section")(46,"h2"),r._uU(47,"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"),r.qZA(),r.TgZ(48,"div",23)(49,"div",3),r._UZ(50,"input",24)(51,"app-error-validation",5),r.qZA(),r.TgZ(52,"div",3),r._UZ(53,"input",25)(54,"app-error-validation",5),r.qZA(),r.TgZ(55,"div",3),r._UZ(56,"input",26)(57,"app-error-validation",5),r.qZA(),r.TgZ(58,"div",3),r._UZ(59,"input",27)(60,"app-error-validation",5),r.qZA(),r.TgZ(61,"div",3),r._UZ(62,"input",28)(63,"app-error-validation",5),r.qZA(),r.TgZ(64,"div",3),r._UZ(65,"input",29)(66,"app-error-validation",5),r.qZA(),r.TgZ(67,"div",3),r._UZ(68,"input",30)(69,"app-error-validation",5),r.qZA(),r.TgZ(70,"div",3),r._UZ(71,"input",31)(72,"app-error-validation",5),r.qZA(),r.TgZ(73,"div",3),r._UZ(74,"input",32)(75,"app-error-validation",5),r.qZA()()(),r.TgZ(76,"div",33),r.Hsn(77),r.qZA()()()()),2&m&&(r.xp6(4),r.Q6J("formGroup",t.productForm),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"name")),r.xp6(2),r.Q6J("control",t.productForm.get("name")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"brand")),r.xp6(2),r.Q6J("control",t.productForm.get("brand")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"category")),r.xp6(2),r.Q6J("control",t.productForm.get("category")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"subcategory")),r.xp6(2),r.Q6J("control",t.productForm.get("subcategory")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"price")),r.xp6(2),r.Q6J("control",t.productForm.get("price")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"discount")),r.xp6(2),r.Q6J("control",t.productForm.get("discount")),r.xp6(7),r.Q6J("ngClass",t.isValid(t.productForm,"countInStock")),r.xp6(2),r.Q6J("control",t.productForm.get("countInStock")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"shortDescr")),r.xp6(2),r.Q6J("control",t.productForm.get("shortDescr")),r.xp6(5),r.Q6J("ngForOf",t.allImages.controls),r.xp6(10),r.Q6J("ngClass",t.isValid(t.productForm,"material")),r.xp6(2),r.Q6J("control",t.productForm.get("material")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"filling")),r.xp6(2),r.Q6J("control",t.productForm.get("filling")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"sizes")),r.xp6(2),r.Q6J("control",t.productForm.get("sizes")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"color")),r.xp6(2),r.Q6J("control",t.productForm.get("color")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"ergonomics")),r.xp6(2),r.Q6J("control",t.productForm.get("ergonomics")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"load")),r.xp6(2),r.Q6J("control",t.productForm.get("load")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"functions")),r.xp6(2),r.Q6J("control",t.productForm.get("functions")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"additional")),r.xp6(2),r.Q6J("control",t.productForm.get("additional")),r.xp6(1),r.Q6J("ngClass",t.isValid(t.productForm,"care")),r.xp6(2),r.Q6J("control",t.productForm.get("care")))},dependencies:[s.ez,s.mk,s.sg,o.UX,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.qQ,o.sg,o.u,o.CE,_.k],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@900&family=Roboto:ital,wght@0,400;0,500;1,300&family=Satisfy&family=Titan+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Inter:wght@900&family=Manrope&family=Roboto:ital,wght@0,400;0,500;1,300&family=Satisfy&family=Titan+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap";.form-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:auto;flex-direction:row;flex-wrap:wrap;gap:2rem}.input-wrap[_ngcontent-%COMP%]{display:flex;padding:12px 16px;align-items:center;gap:8px;border-radius:8px;border:1px solid #949494}.input[_ngcontent-%COMP%]{width:536px;height:29px;border:none;outline:none;font-size:18px;font-style:normal;font-weight:400;line-height:130%}.input[_ngcontent-%COMP%]::placeholder{color:#949494}.action[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}app-error-validation[_ngcontent-%COMP%]{position:absolute}.allimages[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.allimages__btn[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}']}),f})()},4063:(P,u,e)=>{e.d(u,{i:()=>l});var r=e(4946),s=e(180),o=e(8645);let l=(()=>{var i;class c{constructor(){this.router=(0,r.f3M)(s.F0),this.productFormValid=new o.x,this.productFormValid$=this.productFormValid.asObservable()}isValid(n){this.productFormValid.next(n)}cancel(){this.router.navigate(["/admin/products"])}}return(i=c).\u0275fac=function(n){return new(n||i)},i.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),c})()},2239:(P,u,e)=>{e.d(u,{s:()=>_});var r=e(4946),s=e(9862),o=e(347),l=e(7398),i=e(6306),c=e(4009);let _=(()=>{var n;class h{constructor(){this.http=(0,r.f3M)(s.eN),this.errorHandler=(0,r.f3M)(c.G)}getProducts(a=1){return this.http.get(`${o.rH.URL}/product?page=${a}`).pipe((0,l.U)(d=>d.payload?.products),(0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}getProductById(a){return this.http.get(`${o.rH.URL}/product/${a}`).pipe((0,l.U)(d=>(console.log(d),d.payload)),(0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}getByName(){this.http.get(`${o.rH.URL}/product/search`).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}createProduct(a){return this.http.post(`${o.rH.URL}/product`,a).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}updateProduct(a,d){return this.http.put(`${o.rH.URL}/product/${d}`,a).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}uploadImageProduct(a,d){const g=new FormData;return g.append("file",a),g.append("productId",d),this.http.post(`${o.rH.URL}/upload`,g).pipe((0,i.K)(this.errorHandler.handleError("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f")))}deleteProduct(a){return this.http.delete(`${o.rH.URL}/product/${a}`).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}}return(n=h).\u0275fac=function(a){return new(a||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),h})()},2198:(P,u,e)=>{e.d(u,{w:()=>s});var r=e(1230);const s=(o,l)=>{if(l)for(const i in l)"allImages"!==i&&(o.get(i)?.setValue(l[i]),(0,r.J)(o,i))}}}]);