"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[685],{6685:(C,c,e)=>{e.d(c,{u:()=>h});var t=e(4946),p=e(6814),o=e(95),d=e(2239),i=e(6879),_=e(2198),g=e(6247),n=e(1230),f=e(4063),P=e(7394);function a(u,v){if(1&u){const m=t.EpF();t.TgZ(0,"div")(1,"div",11),t._UZ(2,"input",32),t.qZA(),t.TgZ(3,"div",33)(4,"button",34),t.NdJ("click",function(){t.CHM(m);const r=t.oxw();return t.KtG(r.addImageField())}),t._uU(5," + "),t.qZA(),t.TgZ(6,"button",34),t.NdJ("click",function(){const I=t.CHM(m).index,E=t.oxw();return t.KtG(E.deleteImageField(I))}),t._uU(7," - "),t.qZA()()()}if(2&u){const m=v.index;t.xp6(2),t.Q6J("formControlName",m)}}const l=["*"];let h=(()=>{var u;class v{constructor(){this.isUpdate=!1,this.isCreate=!1,this.fb=(0,t.f3M)(o.qu),this.productService=(0,t.f3M)(d.s),this.alertService=(0,t.f3M)(i.c),this.validFormService=(0,t.f3M)(f.i),this.isValid=n.J,this.unSub=new P.w0,this.allImagesFormArray=this.fb.array([this.fb.control("")]),this.productForm=this.fb.nonNullable.group({name:["",[o.kI.required,o.kI.minLength(4)]],descr:["",[o.kI.required,o.kI.minLength(4)]],shortDescr:["",[o.kI.required,o.kI.minLength(4)]],price:["0",[o.kI.required,o.kI.min(0)]],discount:["0",[o.kI.required,o.kI.min(0)]],brand:["",[o.kI.required,o.kI.minLength(4)]],category:["",[o.kI.required,o.kI.minLength(4)]],subcategory:["",[o.kI.required,o.kI.minLength(4)]],instock:["true",[o.kI.required]],countInStock:["0",[o.kI.required,o.kI.min(0)]],baseImage:[""],allImages:this.allImagesFormArray,material:[""],filling:[""],sizes:[""],color:[""],ergonomics:[""],load:[""],functions:[""],additional:[""],care:[""]})}get allImages(){return this.productForm.get("allImages")}ngOnInit(){this.product&&(0,_.w)(this.productForm,this.product),this.product?.allImages.length&&this.product.allImages.forEach(s=>{this.allImagesFormArray.push(this.fb.control(s))})}onSubmit(){this.isUpdate&&this.product._id&&this.unSub.add(this.productService.updateProduct(this.productForm.value,this.product._id).subscribe(()=>{this.alertService.success("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e")})),this.isCreate&&this.unSub.add(this.productService.createProduct(this.productForm.value).subscribe(()=>{this.alertService.success("\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e")}))}addImageField(){this.allImagesFormArray.push(this.fb.control(""))}deleteImageField(s){this.allImagesFormArray.removeAt(s)}ngOnDestroy(){this.unSub.unsubscribe(),this.isCreate=!1,this.isUpdate=!1}}return(u=v).\u0275fac=function(s){return new(s||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-edit-product-item"]],inputs:{product:"product",isUpdate:"isUpdate",isCreate:"isCreate"},standalone:!0,features:[t.jDz],ngContentSelectors:l,decls:73,vars:36,consts:[[1,"wraper"],[1,"add-product__content"],[1,"form-wrap",3,"formGroup","change","ngSubmit"],[1,"input-wrap",3,"ngClass"],["type","text","placeholder","Product name","formControlName","name",1,"input"],[3,"control"],["type","text","placeholder","Product brand","formControlName","brand",1,"input"],["type","text","placeholder","Product category","formControlName","category",1,"input"],["type","text","placeholder","Product subcategory","formControlName","subcategory",1,"input"],["type","number","placeholder","Product price","formControlName","price","min","0",1,"input"],["type","number","placeholder","Product discount","formControlName","discount","min","0",1,"input"],[1,"input-wrap"],["type","text","placeholder","Product instock","formControlName","instock",1,"input"],["value","false"],["value","true","selected",""],["type","number","placeholder","Product countInStock","formControlName","countInStock","min","0",1,"input"],["type","text","placeholder","Product shortDescr","formControlName","shortDescr",1,"input"],["name","description","id","","cols","30","rows","10","placeholder","Product description","formControlName","descr"],["type","text","formControlName","baseImage",1,"input"],["formArrayName","allImages",1,"allimages"],[4,"ngFor","ngForOf"],[1,"form-wrap"],["type","text","placeholder","Product material","formControlName","material",1,"input"],["type","text","placeholder","Product filling","formControlName","filling",1,"input"],["type","text","placeholder","Product sizes","formControlName","sizes",1,"input"],["type","text","placeholder","Product color","formControlName","color",1,"input"],["type","text","placeholder","Product ergonomics","formControlName","ergonomics",1,"input"],["type","text","placeholder","Product load","formControlName","load",1,"input"],["type","text","placeholder","Product functions","formControlName","functions",1,"input"],["type","text","placeholder","Product additional","formControlName","additional",1,"input"],["type","text","placeholder","Product care","formControlName","care",1,"input"],[1,"action"],["type","text",1,"input",3,"formControlName"],[1,"allimages__btn"],["type","button",1,"btn","btn__add",3,"click"]],template:function(s,r){1&s&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"),t.qZA(),t.TgZ(4,"form",2),t.NdJ("change",function(){return r.validFormService.isValid(r.productForm.valid)})("ngSubmit",function(){return r.onSubmit()}),t.TgZ(5,"div",3),t._UZ(6,"input",4)(7,"app-error-validation",5),t.qZA(),t.TgZ(8,"div",3),t._UZ(9,"input",6)(10,"app-error-validation",5),t.qZA(),t.TgZ(11,"div",3),t._UZ(12,"input",7)(13,"app-error-validation",5),t.qZA(),t.TgZ(14,"div",3),t._UZ(15,"input",8)(16,"app-error-validation",5),t.qZA(),t.TgZ(17,"div",3),t._UZ(18,"input",9)(19,"app-error-validation",5),t.qZA(),t.TgZ(20,"div",3),t._UZ(21,"input",10)(22,"app-error-validation",5),t.qZA(),t.TgZ(23,"div",11)(24,"select",12)(25,"option",13),t._uU(26,"False"),t.qZA(),t.TgZ(27,"option",14),t._uU(28,"True"),t.qZA()()(),t.TgZ(29,"div",3),t._UZ(30,"input",15)(31,"app-error-validation",5),t.qZA(),t.TgZ(32,"div",3),t._UZ(33,"input",16)(34,"app-error-validation",5),t.qZA(),t._UZ(35,"textarea",17),t.TgZ(36,"div",11),t._UZ(37,"input",18),t.qZA(),t.TgZ(38,"div",19),t.YNc(39,a,8,1,"div",20),t.qZA(),t.TgZ(40,"section")(41,"h2"),t._uU(42,"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"),t.qZA(),t.TgZ(43,"div",21)(44,"div",3),t._UZ(45,"input",22)(46,"app-error-validation",5),t.qZA(),t.TgZ(47,"div",3),t._UZ(48,"input",23)(49,"app-error-validation",5),t.qZA(),t.TgZ(50,"div",3),t._UZ(51,"input",24)(52,"app-error-validation",5),t.qZA(),t.TgZ(53,"div",3),t._UZ(54,"input",25)(55,"app-error-validation",5),t.qZA(),t.TgZ(56,"div",3),t._UZ(57,"input",26)(58,"app-error-validation",5),t.qZA(),t.TgZ(59,"div",3),t._UZ(60,"input",27)(61,"app-error-validation",5),t.qZA(),t.TgZ(62,"div",3),t._UZ(63,"input",28)(64,"app-error-validation",5),t.qZA(),t.TgZ(65,"div",3),t._UZ(66,"input",29)(67,"app-error-validation",5),t.qZA(),t.TgZ(68,"div",3),t._UZ(69,"input",30)(70,"app-error-validation",5),t.qZA()()(),t.TgZ(71,"div",31),t.Hsn(72),t.qZA()()()()),2&s&&(t.xp6(4),t.Q6J("formGroup",r.productForm),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"name")),t.xp6(2),t.Q6J("control",r.productForm.get("name")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"brand")),t.xp6(2),t.Q6J("control",r.productForm.get("brand")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"category")),t.xp6(2),t.Q6J("control",r.productForm.get("category")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"subcategory")),t.xp6(2),t.Q6J("control",r.productForm.get("subcategory")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"price")),t.xp6(2),t.Q6J("control",r.productForm.get("price")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"discount")),t.xp6(2),t.Q6J("control",r.productForm.get("discount")),t.xp6(7),t.Q6J("ngClass",r.isValid(r.productForm,"countInStock")),t.xp6(2),t.Q6J("control",r.productForm.get("countInStock")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"shortDescr")),t.xp6(2),t.Q6J("control",r.productForm.get("shortDescr")),t.xp6(5),t.Q6J("ngForOf",r.allImages.controls),t.xp6(5),t.Q6J("ngClass",r.isValid(r.productForm,"material")),t.xp6(2),t.Q6J("control",r.productForm.get("material")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"filling")),t.xp6(2),t.Q6J("control",r.productForm.get("filling")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"sizes")),t.xp6(2),t.Q6J("control",r.productForm.get("sizes")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"color")),t.xp6(2),t.Q6J("control",r.productForm.get("color")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"ergonomics")),t.xp6(2),t.Q6J("control",r.productForm.get("ergonomics")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"load")),t.xp6(2),t.Q6J("control",r.productForm.get("load")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"functions")),t.xp6(2),t.Q6J("control",r.productForm.get("functions")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"additional")),t.xp6(2),t.Q6J("control",r.productForm.get("additional")),t.xp6(1),t.Q6J("ngClass",r.isValid(r.productForm,"care")),t.xp6(2),t.Q6J("control",r.productForm.get("care")))},dependencies:[p.ez,p.mk,p.sg,o.UX,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.qQ,o.sg,o.u,o.CE,g.k],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@900&family=Roboto:ital,wght@0,400;0,500;1,300&family=Satisfy&family=Titan+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Inter:wght@900&family=Manrope&family=Roboto:ital,wght@0,400;0,500;1,300&family=Satisfy&family=Titan+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap";.form-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:auto;flex-direction:row;flex-wrap:wrap;gap:2rem}.input-wrap[_ngcontent-%COMP%]{display:flex;padding:12px 16px;align-items:center;gap:8px;border-radius:8px;border:1px solid #949494}.input[_ngcontent-%COMP%]{width:536px;height:29px;border:none;outline:none;font-size:18px;font-style:normal;font-weight:400;line-height:130%}.input[_ngcontent-%COMP%]::placeholder{color:#949494}.action[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}app-error-validation[_ngcontent-%COMP%]{position:absolute}.allimages[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.allimages__btn[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}']}),v})()},4063:(C,c,e)=>{e.d(c,{i:()=>d});var t=e(4946),p=e(180),o=e(8645);let d=(()=>{var i;class _{constructor(){this.router=(0,t.f3M)(p.F0),this.productFormValid=new o.x,this.productFormValid$=this.productFormValid.asObservable()}isValid(n){this.productFormValid.next(n)}cancel(){this.router.navigate(["/admin/products"])}}return(i=_).\u0275fac=function(n){return new(n||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),_})()},2239:(C,c,e)=>{e.d(c,{s:()=>g});var t=e(4946),p=e(9862),o=e(347),d=e(7398),i=e(6306),_=e(4009);let g=(()=>{var n;class f{constructor(){this.http=(0,t.f3M)(p.eN),this.errorHandler=(0,t.f3M)(_.G)}getProducts(a=100){return this.http.get(`${o.rH.URL}/product?perPage=${a}`).pipe((0,d.U)(l=>l.payload?.products),(0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}getProductById(a){return this.http.get(`${o.rH.URL}/product/${a}`).pipe((0,d.U)(l=>(console.log(l),l.payload)),(0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}getByName(){this.http.get(`${o.rH.URL}/product/search`).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}createProduct(a){return this.http.post(`${o.rH.URL}/product`,a).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}updateProduct(a,l){return this.http.put(`${o.rH.URL}/product/${l}`,a).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}uploadImageProduct(a,l){const h=new FormData;return h.append("file",a),h.append("productId",l),this.http.post(`${o.rH.URL}/upload`,h).pipe((0,i.K)(this.errorHandler.handleError("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f")))}deleteProduct(a){return this.http.delete(`${o.rH.URL}/product/${a}`).pipe((0,i.K)(this.errorHandler.handleError("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u0430\u043d\u0456!")))}}return(n=f).\u0275fac=function(a){return new(a||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),f})()},2198:(C,c,e)=>{e.d(c,{w:()=>p});var t=e(1230);const p=(o,d)=>{if(d)for(const i in d)"allImages"!==i&&(o.get(i)?.setValue(d[i]),(0,t.J)(o,i))}}}]);